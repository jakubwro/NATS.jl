<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Streams · NATS</title><meta name="title" content="Streams · NATS"/><meta property="og:title" content="Streams · NATS"/><meta property="twitter:title" content="Streams · NATS"/><meta name="description" content="Documentation for NATS."/><meta property="og:description" content="Documentation for NATS."/><meta property="twitter:description" content="Documentation for NATS."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">NATS</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">NATS.jl - NATS client for Julia.</a></li><li><span class="tocitem">Core NATS</span><ul><li><a class="tocitem" href="../../examples/">Quick start</a></li><li><a class="tocitem" href="../../connect/">Connection</a></li><li><a class="tocitem" href="../../pubsub/">Publish - Subscribe</a></li><li><a class="tocitem" href="../../reqreply/">Request - Reply</a></li><li><a class="tocitem" href="../../custom-data/">Transport data structures</a></li><li><a class="tocitem" href="../../scoped_connection/">Scoped connection</a></li><li><a class="tocitem" href="../../debugging/">Debugging</a></li></ul></li><li><span class="tocitem">JetStream</span><ul><li class="is-active"><a class="tocitem" href>Streams</a><ul class="internal"><li><a class="tocitem" href="#Management"><span>Management</span></a></li><li><a class="tocitem" href="#Subscriptions"><span>Subscriptions</span></a></li><li><a class="tocitem" href="#Messages"><span>Messages</span></a></li></ul></li><li><a class="tocitem" href="../consumer/">Consumer</a></li><li><a class="tocitem" href="../keyvalue/">Key Value streams</a></li><li><a class="tocitem" href="../jetdict/">JetDict</a></li><li><a class="tocitem" href="../jetchannel/">JetChannel</a></li></ul></li><li><span class="tocitem">Internals</span><ul><li><a class="tocitem" href="../../protocol/">Protocol messages</a></li><li><a class="tocitem" href="../../interrupt_handling/">Handling SIGINT</a></li><li><a class="tocitem" href="../../benchmarks/">Benchmarks</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">JetStream</a></li><li class="is-active"><a href>Streams</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Streams</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/jakubwro/NATS.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/jakubwro/NATS.jl/blob/main/docs/src/jetstream/stream.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Streams"><a class="docs-heading-anchor" href="#Streams">Streams</a><a id="Streams-1"></a><a class="docs-heading-anchor-permalink" href="#Streams" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NATS.JetStream.StreamConfiguration" href="#NATS.JetStream.StreamConfiguration"><code>NATS.JetStream.StreamConfiguration</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Configuration options for a stream.</p><ul><li><p><code>name::String</code>: A unique name for the Stream.</p></li><li><p><code>description::Union{Nothing, String}</code>: A short description of the purpose of this stream</p></li><li><p><code>subjects::Union{Nothing, Vector{String}}</code>: A list of subjects to consume, supports wildcards. Must be empty when a mirror is configured. May be empty when sources are configured.</p></li><li><p><code>subject_transform::Union{Nothing, NATS.JetStream.SubjectTransform}</code>: Subject transform to apply to matching messages</p></li><li><p><code>retention::Symbol</code>: How messages are retained in the Stream, once this is exceeded old messages are removed.</p></li><li><p><code>max_consumers::Int64</code>: How many Consumers can be defined for a given Stream. -1 for unlimited.</p></li><li><p><code>max_msgs::Int64</code>: How many messages may be in a Stream, oldest messages will be removed if the Stream exceeds this size. -1 for unlimited.</p></li><li><p><code>max_msgs_per_subject::Union{Nothing, Int64}</code>: For wildcard streams ensure that for every unique subject this many messages are kept - a per subject retention limit</p></li><li><p><code>max_bytes::Int64</code>: How big the Stream may be, when the combined stream size exceeds this old messages are removed. -1 for unlimited.</p></li><li><p><code>max_age::Int64</code>: Maximum age of any message in the stream, expressed in nanoseconds. 0 for unlimited.</p></li><li><p><code>max_msg_size::Union{Nothing, Int32}</code>: The largest message that will be accepted by the Stream. -1 for unlimited.</p></li><li><p><code>storage::Symbol</code>: The storage backend to use for the Stream.</p></li><li><p><code>compression::Symbol</code>: Optional compression algorithm used for the Stream.</p></li><li><p><code>first_seq::Union{Nothing, UInt64}</code>: A custom sequence to use for the first message in the stream</p></li><li><p><code>num_replicas::Int64</code>: How many replicas to keep for each message.</p></li><li><p><code>no_ack::Union{Nothing, Bool}</code>: Disables acknowledging messages that are received by the Stream.</p></li><li><p><code>discard::Union{Nothing, Symbol}</code>: When a Stream reach it&#39;s limits either old messages are deleted or new ones are denied</p></li><li><p><code>duplicate_window::Union{Nothing, Int64}</code>: The time window to track duplicate messages for, expressed in nanoseconds. 0 for default</p></li><li><p><code>placement::Union{Nothing, NATS.JetStream.Placement}</code>: Placement directives to consider when placing replicas of this stream, random placement when unset</p></li><li><p><code>mirror::Union{Nothing, NATS.JetStream.StreamSource}</code>: Maintains a 1:1 mirror of another stream with name matching this property.  When a mirror is configured subjects and sources must be empty.</p></li><li><p><code>sources::Union{Nothing, Vector{NATS.JetStream.StreamSource}}</code>: List of Stream names to replicate into this Stream</p></li><li><p><code>sealed::Union{Nothing, Bool}</code>: Sealed streams do not allow messages to be deleted via limits or API, sealed streams can not be unsealed via configuration update. Can only be set on already created streams via the Update API</p></li><li><p><code>deny_delete::Union{Nothing, Bool}</code>: Restricts the ability to delete messages from a stream via the API. Cannot be changed once set to true</p></li><li><p><code>deny_purge::Union{Nothing, Bool}</code>: Restricts the ability to purge messages from a stream via the API. Cannot be change once set to true</p></li><li><p><code>allow_rollup_hdrs::Union{Nothing, Bool}</code>: Allows the use of the Nats-Rollup header to replace all contents of a stream, or subject in a stream, with a single new message</p></li><li><p><code>allow_direct::Union{Nothing, Bool}</code>: Allow higher performance, direct access to get individual messages</p></li><li><p><code>mirror_direct::Union{Nothing, Bool}</code>: Allow higher performance, direct access for mirrors as well</p></li><li><p><code>republish::Union{Nothing, NATS.JetStream.Republish}</code></p></li><li><p><code>discard_new_per_subject::Union{Nothing, Bool}</code>: When discard policy is new and the stream is one with max messages per subject set, this will apply the new behavior to every subject. Essentially turning discard new from maximum number of subjects into maximum number of messages in a subject.</p></li><li><p><code>metadata::Union{Nothing, Dict{String, String}}</code>: Additional metadata for the Stream</p></li><li><p><code>consumer_limits::Union{Nothing, NATS.JetStream.StreamConsumerLimit}</code>: Limits of certain values that consumers can set, defaults for those who don&#39;t set these settings</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jakubwro/NATS.jl/blob/fda2d1372302fbb099b7c2c0845feebe9bc29f75/src/jetstream/api/stream.jl#L62-L66">source</a></section></article><h2 id="Management"><a class="docs-heading-anchor" href="#Management">Management</a><a id="Management-1"></a><a class="docs-heading-anchor-permalink" href="#Management" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NATS.JetStream.stream_create" href="#NATS.JetStream.stream_create"><code>NATS.JetStream.stream_create</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">stream_create(connection, config; no_throw)
</code></pre><p>Create a stream.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jakubwro/NATS.jl/blob/fda2d1372302fbb099b7c2c0845feebe9bc29f75/src/jetstream/stream/manage.jl#L2">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NATS.JetStream.stream_update" href="#NATS.JetStream.stream_update"><code>NATS.JetStream.stream_update</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">stream_update(connection, config; no_throw)
</code></pre><p>Update a stream.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jakubwro/NATS.jl/blob/fda2d1372302fbb099b7c2c0845feebe9bc29f75/src/jetstream/stream/manage.jl#L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NATS.JetStream.stream_purge" href="#NATS.JetStream.stream_purge"><code>NATS.JetStream.stream_purge</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">stream_purge(connection, stream; no_throw)
</code></pre><p>Purge a stream. It is equivalent of deleting all messages.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jakubwro/NATS.jl/blob/fda2d1372302fbb099b7c2c0845feebe9bc29f75/src/jetstream/stream/manage.jl#L54">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NATS.JetStream.stream_delete" href="#NATS.JetStream.stream_delete"><code>NATS.JetStream.stream_delete</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">stream_delete(connection, stream; no_throw)
</code></pre><p>Delete a stream.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jakubwro/NATS.jl/blob/fda2d1372302fbb099b7c2c0845feebe9bc29f75/src/jetstream/stream/manage.jl#L39">source</a></section></article><h2 id="Subscriptions"><a class="docs-heading-anchor" href="#Subscriptions">Subscriptions</a><a id="Subscriptions-1"></a><a class="docs-heading-anchor-permalink" href="#Subscriptions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NATS.JetStream.stream_publish" href="#NATS.JetStream.stream_publish"><code>NATS.JetStream.stream_publish</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">stream_publish(connection, subject, data; delays)
</code></pre><p>Publish a message to stream.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jakubwro/NATS.jl/blob/fda2d1372302fbb099b7c2c0845feebe9bc29f75/src/jetstream/stream/publish.jl#L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NATS.JetStream.stream_subscribe" href="#NATS.JetStream.stream_subscribe"><code>NATS.JetStream.stream_subscribe</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">stream_subscribe(f, connection, subject)
</code></pre><p>Subscribe to a stream.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jakubwro/NATS.jl/blob/fda2d1372302fbb099b7c2c0845feebe9bc29f75/src/jetstream/stream/subscribe.jl#L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NATS.JetStream.stream_unsubscribe" href="#NATS.JetStream.stream_unsubscribe"><code>NATS.JetStream.stream_unsubscribe</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">stream_unsubscribe(connection, stream_sub)
</code></pre><p>Unsubscribe stream subscription.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jakubwro/NATS.jl/blob/fda2d1372302fbb099b7c2c0845feebe9bc29f75/src/jetstream/stream/unsubscribe.jl#L1">source</a></section></article><h2 id="Messages"><a class="docs-heading-anchor" href="#Messages">Messages</a><a id="Messages-1"></a><a class="docs-heading-anchor-permalink" href="#Messages" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NATS.JetStream.stream_message_get" href="#NATS.JetStream.stream_message_get"><code>NATS.JetStream.stream_message_get</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">stream_message_get(
    connection,
    stream_name,
    subject;
    allow_direct
)
</code></pre><p>Get a message from stream.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jakubwro/NATS.jl/blob/fda2d1372302fbb099b7c2c0845feebe9bc29f75/src/jetstream/stream/message.jl#L15">source</a></section><section><div><pre><code class="language-julia hljs">stream_message_get(connection, stream, subject)
</code></pre><p>Get a message from stream.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jakubwro/NATS.jl/blob/fda2d1372302fbb099b7c2c0845feebe9bc29f75/src/jetstream/stream/message.jl#L44">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NATS.JetStream.stream_message_delete" href="#NATS.JetStream.stream_message_delete"><code>NATS.JetStream.stream_message_delete</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">stream_message_delete(connection, stream, msg)
</code></pre><p>Delete a message from stream.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jakubwro/NATS.jl/blob/fda2d1372302fbb099b7c2c0845feebe9bc29f75/src/jetstream/stream/message.jl#L53">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../debugging/">« Debugging</a><a class="docs-footer-nextpage" href="../consumer/">Consumer »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.0 on <span class="colophon-date" title="Saturday 3 February 2024 12:45">Saturday 3 February 2024</span>. Using Julia version 1.10.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
