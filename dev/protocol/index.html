<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Protocol messages · NATS</title><meta name="title" content="Protocol messages · NATS"/><meta property="og:title" content="Protocol messages · NATS"/><meta property="twitter:title" content="Protocol messages · NATS"/><meta name="description" content="Documentation for NATS."/><meta property="og:description" content="Documentation for NATS."/><meta property="twitter:description" content="Documentation for NATS."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">NATS</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">NATS.jl</a></li><li><a class="tocitem" href="../connect/">Connect</a></li><li><a class="tocitem" href="../pubsub/">Publish - subscribe</a></li><li><a class="tocitem" href="../reqreply/">Request - reply</a></li><li><span class="tocitem">Internals</span><ul><li><a class="tocitem" href="../design/">Design notes</a></li><li class="is-active"><a class="tocitem" href>Protocol messages</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Internals</a></li><li class="is-active"><a href>Protocol messages</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Protocol messages</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/jakubwro/NATS.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/jakubwro/NATS.jl/blob/main/docs/src/protocol.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Protocol-messages"><a class="docs-heading-anchor" href="#Protocol-messages">Protocol messages</a><a id="Protocol-messages-1"></a><a class="docs-heading-anchor-permalink" href="#Protocol-messages" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NATS.Info" href="#NATS.Info"><code>NATS.Info</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A client will need to start as a plain TCP connection, then when the server accepts a connection from the client, it will send information about itself, the configuration and security requirements necessary for the client to successfully authenticate with the server and exchange messages. When using the updated client protocol (see CONNECT below), INFO messages can be sent anytime by the server. This means clients with that protocol level need to be able to asynchronously handle INFO messages.</p><ul><li><p><code>server_id::String</code>: The unique identifier of the NATS server.</p></li><li><p><code>server_name::String</code>: The name of the NATS server.</p></li><li><p><code>version::String</code>: The version of NATS.</p></li><li><p><code>go::String</code>: The version of golang the NATS server was built with.</p></li><li><p><code>host::String</code>: The IP address used to start the NATS server, by default this will be <code>0.0.0.0</code> and can be configured with <code>-client_advertise host:port</code>.</p></li><li><p><code>port::Int64</code>: The port number the NATS server is configured to listen on.</p></li><li><p><code>headers::Bool</code>: Whether the server supports headers.</p></li><li><p><code>max_payload::Int64</code>: Maximum payload size, in bytes, that the server will accept from the client.</p></li><li><p><code>proto::Int64</code>: An integer indicating the protocol version of the server. The server version 1.2.0 sets this to <code>1</code> to indicate that it supports the &quot;Echo&quot; feature.</p></li><li><p><code>client_id::Union{Nothing, UInt64}</code>: The internal client identifier in the server. This can be used to filter client connections in monitoring, correlate with error logs, etc...</p></li><li><p><code>auth_required::Union{Nothing, Bool}</code>: If this is true, then the client should try to authenticate upon connect.</p></li><li><p><code>tls_required::Union{Nothing, Bool}</code>: If this is true, then the client must perform the TLS/1.2 handshake. Note, this used to be <code>ssl_required</code> and has been updated along with the protocol from SSL to TLS.</p></li><li><p><code>tls_verify::Union{Nothing, Bool}</code>: If this is true, the client must provide a valid certificate during the TLS handshake.</p></li><li><p><code>tls_available::Union{Nothing, Bool}</code>: If this is true, the client can provide a valid certificate during the TLS handshake.</p></li><li><p><code>connect_urls::Union{Nothing, Vector{String}}</code>: List of server urls that a client can connect to.</p></li><li><p><code>ws_connect_urls::Union{Nothing, Vector{String}}</code>: List of server urls that a websocket client can connect to.</p></li><li><p><code>ldm::Union{Nothing, Bool}</code>: If the server supports <em>Lame Duck Mode</em> notifications, and the current server has transitioned to lame duck, <code>ldm</code> will be set to <code>true</code>.</p></li><li><p><code>git_commit::Union{Nothing, String}</code>: The git hash at which the NATS server was built.</p></li><li><p><code>jetstream::Union{Nothing, Bool}</code>: Whether the server supports JetStream.</p></li><li><p><code>ip::Union{Nothing, String}</code>: The IP of the server.</p></li><li><p><code>client_ip::Union{Nothing, String}</code>: The IP of the client.</p></li><li><p><code>nonce::Union{Nothing, String}</code>: The nonce for use in CONNECT.</p></li><li><p><code>cluster::Union{Nothing, String}</code>: The name of the cluster.</p></li><li><p><code>domain::Union{Nothing, String}</code>: The configured NATS domain of the server.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jakubwro/NATS.jl/blob/84b8bfd28884aebea773b1419da384aafab40ca1/src/protocol/structs.jl#L5-L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NATS.Connect" href="#NATS.Connect"><code>NATS.Connect</code></a> — <span class="docstring-category">Type</span></header><section><div><p>The CONNECT message is the client version of the <code>INFO</code> message. Once the client has established a TCP/IP socket connection with the NATS server, and an <code>INFO</code> message has been received from the server, the client may send a <code>CONNECT</code> message to the NATS server to provide more information about the current connection as well as security information.</p><ul><li><p><code>verbose::Bool</code>: Turns on <code>+OK</code> protocol acknowledgements.</p></li><li><p><code>pedantic::Bool</code>: Turns on additional strict format checking, e.g. for properly formed subjects.</p></li><li><p><code>tls_required::Bool</code>: Indicates whether the client requires an SSL connection.</p></li><li><p><code>auth_token::Union{Nothing, String}</code>: Client authorization token.</p></li><li><p><code>user::Union{Nothing, String}</code>: Connection username.</p></li><li><p><code>pass::Union{Nothing, String}</code>: Connection password.</p></li><li><p><code>name::Union{Nothing, String}</code>: Client name.</p></li><li><p><code>lang::String</code>: The implementation language of the client.</p></li><li><p><code>version::String</code>: The version of the client.</p></li><li><p><code>protocol::Union{Nothing, Int64}</code>: Sending <code>0</code> (or absent) indicates client supports original protocol. Sending <code>1</code> indicates that the client supports dynamic reconfiguration of cluster topology changes by asynchronously receiving <code>INFO</code> messages with known servers it can reconnect to.</p></li><li><p><code>echo::Union{Nothing, Bool}</code>: If set to <code>false</code>, the server (version 1.2.0+) will not send originating messages from this connection to its own subscriptions. Clients should set this to <code>false</code> only for server supporting this feature, which is when <code>proto</code> in the <code>INFO</code> protocol is set to at least <code>1</code>.</p></li><li><p><code>sig::Union{Nothing, String}</code>: In case the server has responded with a <code>nonce</code> on <code>INFO</code>, then a NATS client must use this field to reply with the signed <code>nonce</code>.</p></li><li><p><code>jwt::Union{Nothing, String}</code>: The JWT that identifies a user permissions and account.</p></li><li><p><code>no_responders::Union{Nothing, Bool}</code>: Enable quick replies for cases where a request is sent to a topic with no responders.</p></li><li><p><code>headers::Union{Nothing, Bool}</code>: Whether the client supports headers.</p></li><li><p><code>nkey::Union{Nothing, String}</code>: The public NKey to authenticate the client. This will be used to verify the signature (<code>sig</code>) against the <code>nonce</code> provided in the <code>INFO</code> message.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jakubwro/NATS.jl/blob/84b8bfd28884aebea773b1419da384aafab40ca1/src/protocol/structs.jl#L61-L65">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NATS.Pub" href="#NATS.Pub"><code>NATS.Pub</code></a> — <span class="docstring-category">Type</span></header><section><div><p>The PUB message publishes the message payload to the given subject name, optionally supplying a reply subject. If a reply subject is supplied, it will be delivered to eligible subscribers along with the supplied payload. Note that the payload itself is optional. To omit the payload, set the payload size to 0, but the second CRLF is still required.</p><ul><li><p><code>subject::String</code>: The destination subject to publish to.</p></li><li><p><code>reply_to::Union{Nothing, String}</code>: The reply subject that subscribers can use to send a response back to the publisher/requestor.</p></li><li><p><code>bytes::Int64</code>: The payload size in bytes.</p></li><li><p><code>payload::Union{Nothing, String}</code>: The message payload data.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jakubwro/NATS.jl/blob/84b8bfd28884aebea773b1419da384aafab40ca1/src/protocol/structs.jl#L103-L107">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NATS.HPub" href="#NATS.HPub"><code>NATS.HPub</code></a> — <span class="docstring-category">Type</span></header><section><div><p>The HPUB message is the same as PUB but extends the message payload to include NATS headers. Note that the payload itself is optional. To omit the payload, set the total message size equal to the size of the headers. Note that the trailing CR+LF is still required.</p><ul><li><p><code>subject::String</code>: The destination subject to publish to.</p></li><li><p><code>reply_to::Union{Nothing, String}</code>: The reply subject that subscribers can use to send a response back to the publisher/requestor.</p></li><li><p><code>header_bytes::Int64</code>: The size of the headers section in bytes including the <code>␍␊␍␊</code> delimiter before the payload.</p></li><li><p><code>total_bytes::Int64</code>: The total size of headers and payload sections in bytes.</p></li><li><p><code>headers::Union{Nothing, String}</code>: Header version <code>NATS/1.0␍␊</code> followed by one or more <code>name: value</code> pairs, each separated by <code>␍␊</code>.</p></li><li><p><code>payload::Union{Nothing, String}</code>: The message payload data.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jakubwro/NATS.jl/blob/84b8bfd28884aebea773b1419da384aafab40ca1/src/protocol/structs.jl#L119-L123">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NATS.Sub" href="#NATS.Sub"><code>NATS.Sub</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>SUB</code> initiates a subscription to a subject, optionally joining a distributed queue group.</p><ul><li><p><code>subject::String</code>: The subject name to subscribe to.</p></li><li><p><code>queue_group::Union{Nothing, String}</code>: If specified, the subscriber will join this queue group.</p></li><li><p><code>sid::String</code>: A unique alphanumeric subscription ID, generated by the client.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jakubwro/NATS.jl/blob/84b8bfd28884aebea773b1419da384aafab40ca1/src/protocol/structs.jl#L139-L143">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NATS.Unsub" href="#NATS.Unsub"><code>NATS.Unsub</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>UNSUB</code> unsubscribes the connection from the specified subject, or auto-unsubscribes after the specified number of messages has been received.</p><ul><li><p><code>sid::String</code>: The unique alphanumeric subscription ID of the subject to unsubscribe from.</p></li><li><p><code>max_msgs::Union{Nothing, Int64}</code>: A number of messages to wait for before automatically unsubscribing.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jakubwro/NATS.jl/blob/84b8bfd28884aebea773b1419da384aafab40ca1/src/protocol/structs.jl#L153-L157">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NATS.Msg" href="#NATS.Msg"><code>NATS.Msg</code></a> — <span class="docstring-category">Type</span></header><section><div><p>The <code>MSG</code> protocol message is used to deliver an application message to the client.</p><ul><li><p><code>subject::String</code>: Subject name this message was received on.</p></li><li><p><code>sid::String</code>: The unique alphanumeric subscription ID of the subject.</p></li><li><p><code>reply_to::Union{Nothing, String}</code>: The subject on which the publisher is listening for responses.</p></li><li><p><code>bytes::Int64</code>: Size of the payload in bytes.</p></li><li><p><code>payload::Union{Nothing, String}</code>: The message payload data.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jakubwro/NATS.jl/blob/84b8bfd28884aebea773b1419da384aafab40ca1/src/protocol/structs.jl#L165-L169">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NATS.HMsg" href="#NATS.HMsg"><code>NATS.HMsg</code></a> — <span class="docstring-category">Type</span></header><section><div><p>The HMSG message is the same as MSG, but extends the message payload with headers. See also <a href="https://github.com/nats-io/nats-architecture-and-design/blob/main/adr/ADR-4.md">ADR-4 NATS Message Headers</a>.</p><ul><li><p><code>subject::String</code>: Subject name this message was received on.</p></li><li><p><code>sid::String</code>: The unique alphanumeric subscription ID of the subject.</p></li><li><p><code>reply_to::Union{Nothing, String}</code>: The subject on which the publisher is listening for responses.</p></li><li><p><code>header_bytes::Int64</code>: The size of the headers section in bytes including the <code>␍␊␍␊</code> delimiter before the payload.</p></li><li><p><code>total_bytes::Int64</code>: The total size of headers and payload sections in bytes.</p></li><li><p><code>headers::Union{Nothing, String}</code>: Header version <code>NATS/1.0␍␊</code> followed by one or more <code>name: value</code> pairs, each separated by <code>␍␊</code>.</p></li><li><p><code>payload::Union{Nothing, String}</code>: The message payload data.</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jakubwro/NATS.jl/blob/84b8bfd28884aebea773b1419da384aafab40ca1/src/protocol/structs.jl#L183-L187">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NATS.Ping" href="#NATS.Ping"><code>NATS.Ping</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>PING</code> and <code>PONG</code> implement a simple keep-alive mechanism between client and server.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jakubwro/NATS.jl/blob/84b8bfd28884aebea773b1419da384aafab40ca1/src/protocol/structs.jl#L205-L209">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NATS.Pong" href="#NATS.Pong"><code>NATS.Pong</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>PING</code> and <code>PONG</code> implement a simple keep-alive mechanism between client and server.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jakubwro/NATS.jl/blob/84b8bfd28884aebea773b1419da384aafab40ca1/src/protocol/structs.jl#L213-L217">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NATS.Err" href="#NATS.Err"><code>NATS.Err</code></a> — <span class="docstring-category">Type</span></header><section><div><p>The <code>-ERR</code> message is used by the server indicate a protocol, authorization, or other runtime connection error to the client. Most of these errors result in the server closing the connection.</p><ul><li><code>message::String</code>: Error message.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jakubwro/NATS.jl/blob/84b8bfd28884aebea773b1419da384aafab40ca1/src/protocol/structs.jl#L221-L225">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NATS.Ok" href="#NATS.Ok"><code>NATS.Ok</code></a> — <span class="docstring-category">Type</span></header><section><div><p>When the <code>verbose</code> connection option is set to <code>true</code> (the default value), the server acknowledges each well-formed protocol message from the client with a <code>+OK</code> message.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jakubwro/NATS.jl/blob/84b8bfd28884aebea773b1419da384aafab40ca1/src/protocol/structs.jl#L231-L235">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../design/">« Design notes</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.0 on <span class="colophon-date" title="Wednesday 8 November 2023 22:26">Wednesday 8 November 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
